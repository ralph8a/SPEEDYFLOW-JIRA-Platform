<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flowing MVP - Footer with Chat Only</title>
    <link rel="stylesheet" href="styles-footer-v2.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <h1><i class="fas fa-rocket"></i> SPEEDYFLOW Flowing MVP</h1>
            <span class="badge badge-beta">AI Powered + Chat Only</span>
        </div>
        <div class="header-right">
            <div class="ml-status">
                <i class="fas fa-circle status-dot"></i>
                <span>ML Service: <strong id="mlServiceStatus">Connected</strong></span>
            </div>
        </div>
    </header>

    <!-- Main Content Area - Ticket Board -->
    <div class="main-content">
        <div class="ticket-board">
            <h2><i class="fas fa-columns"></i> Kanban Board</h2>
            <div class="board-columns">
                <div class="board-column">
                    <h3>Abierto</h3>
                    <div class="ticket-card" onclick="selectTicket('MSM-1234')">
                        <div class="ticket-key">MSM-1234</div>
                        <div class="ticket-summary">Error en API de autenticaciï¿½n</div>
                        <div class="ticket-meta">
                            <span class="priority high">Alta</span>
                            <span class="assignee">Carlos Q.</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== FLOWING MVP FOOTER (Chat Only) ===== -->
    <div id="flowingFooter" class="flowing-footer collapsed">
        <!-- Toggle Button -->
        <button id="flowingToggleBtn" class="flowing-toggle-btn" title="Flowing MVP Assistant">
            <span class="flowing-icon flowing-sf-logo">SF</span>
            <div class="flowing-info">
                <span class="flowing-label">Flowing MVP</span>
                <span class="flowing-suggestion" id="flowingSuggestion">Analyzing your queue...</span>
            </div>
            <span class="flowing-chevron"></span>
        </button>

        <!-- Flowing Content -->
        <div class="flowing-content">
            <div class="flowing-header">
                <div class="flowing-title">
                    <span class="flowing-avatar flowing-sf-logo">SF</span>
                    <div class="flowing-title-text">
                        <h3>Flowing MVP</h3>
                        <p class="flowing-subtitle">Your AI assistant for tickets, SLAs, and smart suggestions</p>
                    </div>
                </div>
                <div class="flowing-header-controls">
                    <button id="viewToggleBtn" class="view-toggle-btn" title="Switch to balanced view">
                        <i class="fas fa-columns"></i>
                    </button>
                    <button id="flowingCloseBtn" class="flowing-close-btn" title="Close">?</button>
                </div>
            </div>

            <!-- Messages Container -->
            <div id="flowingMessages" class="flowing-messages">
                <div class="flowing-message assistant">
                    <div class="message-avatar flowing-sf-logo">SF</div>
                    <div class="message-content">
                        <p> Hi! I'm Flowing MVP, your SpeedyFlow Ticket Solving Mate! I can help you with:</p>
                        <ul>
                            <li> Analyzing ticket priorities and patterns</li>
                            <li> Explaining SLA statuses and deadlines</li>
                            <li> Suggesting next actions for tickets</li>
                            <li> Providing insights on queue metrics</li>
                        </ul>
                        <p>Just ask me anything!</p>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="flowing-input-area">
                <div class="flowing-context-badge" id="flowingContextBadge">
                    <span class="context-icon"></span>
                    <span class="context-text">No context</span>
                </div>
                <div class="flowing-input-wrapper">
                    <input type="text" id="flowingInput" placeholder="Ask me anything about your tickets..." />
                    <button id="flowingSendBtn" class="flowing-send-btn" title="Send">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Flowing MVP Original JavaScript -->
    <script src="footer-assistant-original.js"></script>
    <script>
    // View Toggle Extension (only addition to original Flowing MVP)
    document.addEventListener('DOMContentLoaded', () => {
        const viewToggleBtn = document.getElementById('viewToggleBtn');
        
        if (viewToggleBtn) {
            viewToggleBtn.addEventListener('click', () => {
                // Switch to balanced view
                const urlParams = new URLSearchParams(window.location.search);
                const ticketKey = urlParams.get('ticket') || 'MSM-1234';
                window.location.href = 'index-footer-v2.html?ticket=' + ticketKey;
            });
        }
    });
</script>
</body>
</html>
