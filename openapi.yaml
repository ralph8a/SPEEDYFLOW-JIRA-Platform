openapi: 3.1.0
info: 
  title: SPEEDYFLOW API
  version: 2.0.0-rebuilt
servers:
  - url: http://localhost:5000
    description: Local development (Flask backend)
  - url: http://ml-service:5001
    description: ML service (container network)
paths:
  /api/dashboard/summary:
    get:
      summary: Dashboard summary metrics
      responses:
        '200': { description: OK }
  /api/queues:
    get:
      summary: List available queues
      parameters:
        - in: query
          name: desk_id
          required: false
          schema: { type: string }
      responses:
        '200': { description: OK }
  /api/desks:
    get:
      summary: List desks (placeholder)
      responses:
        '200': { description: OK }
  /api/issues:
    get:
      summary: List issues for desk/queue
      parameters:
        - in: query
          name: desk_id
          required: true
          schema: { type: string }
        - in: query
          name: queue_id
          required: false
          schema: { type: string }
      responses:
        '200': { description: OK }
  /api/issues/{queue_id}:
    get:
      summary: List issues by queue id
      parameters:
        - in: path
          name: queue_id
          required: true
          schema: { type: string }
        - in: query
          name: desk_id
          required: true
          schema: { type: string }
      responses:
        '200': { description: OK }
  /api/issues/{issue_key}/transitions:
    get:
      summary: Get transitions for an issue
      parameters:
        - in: path
          name: issue_key
          required: true
          schema: { type: string }
      responses:
        '200': { description: OK }
  /api/issues/{issue_key}/sla:
    get:
      summary: Get SLA data for issue
      parameters:
        - in: path
          name: issue_key
          required: true
          schema: { type: string }
      responses:
        '200': { description: OK }
  /api/sla/health:
    get:
      summary: SLA subsystem health
      responses:
        '200': { description: OK }
  /api/issues/{issue_key}/comments:
    get:
      summary: List comments
      parameters:
        - in: path
          name: issue_key
          required: true
          schema: { type: string }
      responses:
        '200': { description: OK }
    post:
      summary: Add comment
      parameters:
        - in: path
          name: issue_key
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                body: { type: string }
      responses:
        '200': { description: OK }
  /api/issues/{issue_key}/comments/{comment_id}:
    put:
      summary: Update comment
      parameters:
        - in: path
          name: issue_key
          required: true
          schema: { type: string }
        - in: path
          name: comment_id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                body: { type: string }
      responses:
        '200': { description: OK }
    delete:
      summary: Delete comment
      parameters:
        - in: path
          name: issue_key
          required: true
          schema: { type: string }
        - in: path
          name: comment_id
          required: true
          schema: { type: string }
      responses:
        '200': { description: OK }
  /api/issues/{issue_key}/attachments:
    get:
      summary: List attachments
      parameters:
        - in: path
          name: issue_key
          required: true
          schema: { type: string }
      responses:
        '200': { description: OK }
  /api/ai/suggestions:
    get:
      summary: AI suggestions stub
      parameters:
        - in: query
          name: text
          required: false
          schema: { type: string }
        - in: query
          name: limit
          required: false
          schema: { type: integer }
      responses:
        '200': { description: OK }
  /api/notifications:
    get:
      summary: List notifications
      responses:
        '200': { description: OK }
  /api/notifications/test:
    post:
      summary: Create test notification
      responses:
        '200': { description: OK }
  /api/exports/issues:
    get:
      summary: Export issues
      parameters:
        - in: query
          name: format
          required: false
          schema: { type: string }
      responses:
        '200': { description: OK }
  /api/automations/health:
    get:
      summary: Automations health
      responses:
        '200': { description: OK }
  /api/automations/run:
    post:
      summary: Trigger automation run
      responses:
        '200': { description: OK }
  /api/backgrounds/list:
    get:
      summary: List background assets
      responses:
        '200': { description: OK }
  /api/user:
    get:
      summary: Current user
      responses:
        '200': { description: OK }
  /api/projects:
    get:
      summary: List projects
      responses:
        '200': { description: OK }
  /health:
    get:
      summary: Health check
      responses:
        '200': { description: OK }
components: {}
