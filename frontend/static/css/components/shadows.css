/* Global shadows to add depth across the UI
   Uses design tokens in :root (variables.css). This file provides stronger
   shadows and dark-mode overrides to improve legibility in dark themes.
*/

:root {
  /* Softer, lower-elevation shadows by default */
  --shadow: 0 8px 24px rgba(2,6,23,0.10);
  --shadow-md: 0 10px 30px rgba(2,6,23,0.12);
  --shadow-sm: 0 4px 12px rgba(2,6,23,0.08);
  --transition-base: 220ms;
  --transition-fast: 120ms;
  /* Typography color tokens (simplified palette for consistent UI)
     --ff-text-primary: main content color
     --ff-text-muted: secondary / muted text
     --ff-accent: brand/accent links and highlights
     --ff-accent-strong: stronger accent for titles
     --ff-success/: success, danger, warning
  */
  --ff-text-primary: #1f2937; /* slate-800 */
  --ff-text-muted: #6b7280; /* gray-500 */
  --ff-accent: #6366f1; /* indigo-500 */
  --ff-accent-strong: #111827; /* slate-900 */
  --ff-success: #10b981;
  --ff-danger: #ef4444;
  --ff-warning: #f59e0b;
}

/* Apply shadows only to essential, small-to-medium elements */
:where(.issue-card, .card, .flowing-footer, .mentions-autocomplete-dropdown, .comment) {
  box-shadow: var(--shadow) !important;
  transition: box-shadow var(--transition-base) ease, transform var(--transition-fast) ease;
}

/* Keep other large panels flat by default */
:where(.panel, .panel-card, .sla-monitor-container, .ml-actions-section, .ticket-description-section, .left-column, .right-column, .comments-section) {
  box-shadow: none !important;
}

/* Smaller elements (buttons, small cards, mention items) */
:where(button, .btn, .btn-add-comment, .btn-add-comment-footer, .comment-action-btn, .comment-toolbar-btn, .mention-item, .mention-option) {
  box-shadow: var(--shadow-sm) !important;
  transition: box-shadow var(--transition-fast) ease, transform var(--transition-fast) ease;
}

/* Hover/active states for emphasis */
:where(.card:hover, [class*="card"]:hover, .panel:hover, .issue-card:hover, .flowing-footer:hover, .mentions-autocomplete-dropdown .mention-item:hover, button:hover, .btn:hover, .comment:hover) {
  box-shadow: var(--shadow-md) !important;
  transform: translateY(-2px);
}

/* Focus states should also show slight elevation */
:where(button:focus, .btn:focus, .mention-item:focus, .field-input:focus, textarea:focus, input:focus) {
  outline: none !important;
  box-shadow: var(--shadow-md) !important;
}

/* Make the mentions dropdown items clearly separated */
.mentions-autocomplete-dropdown .mention-item {
  border-radius: 6px;
  margin: 6px;
  padding: 6px 8px;
}

/* Subtle inner shadows for cards that contain images */
.issue-card .card-image, .comment .comment-avatar {
  box-shadow: var(--shadow-sm) inset !important;
}

/* Dark mode overrides: force readable backgrounds and contrast */
body[data-theme="dark"] :where(.ticket-description-section, .field-input, .ml-actions-section, .comments-section, .suggestion-item, .flowing-footer, .left-column, .right-column, .panel, .panel-card, .issue-card) {
  background: linear-gradient(180deg, rgba(10,12,18,0.6), rgba(8,10,14,0.6)) !important;
  color: #e6eef8 !important;
  border-color: rgba(255,255,255,0.04) !important;
}

/* Global typography color normalization
   Reduce the number of distinct font colors by mapping common UI text
   to a small, pleasant palette. Use !important sparingly to override
   legacy inline colors where necessary.
*/
body {
  color: var(--ff-text-primary);
}

/* Muted / secondary text */
.ff-text-muted,
.ticket-meta,
.flowing-subtitle,
.flowing-label,
.context-text,
.comment-time,
.field-label,
.footer-subtext,
.small-muted {
  color: var(--ff-text-muted) !important;
}

/* Accent / links / titles */
a,
.flowing-title-text h3,
.footer-title,
.ticket-key-header,
.ticket-summary-header {
  color: var(--ff-accent) !important;
}

/* Strong headings */
h1,h2,h3,h4,h5,h6,
.flowing-title,
.footer-title {
  color: var(--ff-accent-strong) !important;
}

/* Status colors mapped to tokens */
.status-success { color: var(--ff-success) !important; }
.status-danger { color: var(--ff-danger) !important; }
.status-warning { color: var(--ff-warning) !important; }

/* Dark theme: pick lighter palette for text while preserving tokens */
body[data-theme="dark"] {
  --ff-text-primary: #e6eef8;
  --ff-text-muted: #cbd5e1;
  --ff-accent: #8b5cf6;
  --ff-accent-strong: #f8fafc;
}

/* Ensure Flowing MVP / ML footer and balanced view honor the typography tokens
   and adapt automatically to dark mode via the variables above. This avoids
   hard-coded colors in legacy CSS causing poor contrast in dark theme.
*/
.flowing-footer, .ml-footer, .footer-two-columns, #balancedView {
  color: var(--ff-text-primary) !important;
  background-color: transparent !important;
}

.flowing-footer .ticket-description-content,
.flowing-footer .ticket-meta,
.flowing-footer .flowing-subtitle,
.footer-subtext,
.ticket-summary,
.ticket-key,
.left-column, .right-column {
  color: var(--ff-text-muted) !important;
}

/* Links and strong titles inside footer */
.flowing-footer a,
.flowing-footer .footer-title,
.flowing-footer .flowing-title-text h3 {
  color: var(--ff-accent) !important;
}

/* Dark-mode specific tweaks for footer backgrounds to preserve glassmorphism */
body[data-theme="dark"] .flowing-footer,
body.theme-dark .ml-footer {
  background: linear-gradient(180deg, rgba(17,24,39,0.76), rgba(12,14,18,0.72)) !important;
  border-top-color: rgba(255,255,255,0.04) !important;
}

/* Ensure white text for small labels in dark mode */
body[data-theme="dark"] .field-label, body[data-theme="dark"] .comment-author, body[data-theme="dark"] .comment-time {
  color: #cbd5e1 !important;
}

/* Mentions dropdown in dark mode */
body[data-theme="dark"] .mentions-autocomplete-dropdown {
  background: #071022 !important;
  color: #e6eef8 !important;
  border: 1px solid rgba(255,255,255,0.06) !important;
  box-shadow: 0 8px 24px rgba(0,0,0,0.6) !important;
}

/* Attachments preview in dark mode */
body[data-theme="dark"] .attachments-preview, body[data-theme="dark"] .attachments-preview-footer {
  background: transparent !important;
}

/* Remove shadows for large layout panels to keep UI light and avoid heavy elevation */
:where(.panel, .panel-card, .sla-monitor-container, .ml-actions-section, .ticket-description-section, .left-column, .right-column) {
  box-shadow: none !important;
}
